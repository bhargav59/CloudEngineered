{% extends 'base.html' %}
{% load static %}

{% block title %}Preferences - CloudEngineered{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header -->
        <div class="mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Preferences</h1>
                    <p class="text-gray-600 mt-2">Customize your CloudEngineered experience.</p>
                </div>
                <a href="{% url 'users:dashboard' %}" class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Dashboard
                </a>
            </div>
        </div>

        <form method="post" class="space-y-8">
            {% csrf_token %}

            <!-- Dashboard Preferences -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-medium text-gray-900">Dashboard Preferences</h2>
                    <p class="text-sm text-gray-500">Customize how your dashboard looks and behaves.</p>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Dashboard Layout -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Dashboard Layout</label>
                        <div class="grid grid-cols-3 gap-4">
                            {% for value, label in preferences.DASHBOARD_LAYOUT_CHOICES %}
                                <label class="relative">
                                    <input type="radio" name="dashboard_layout" value="{{ value }}" 
                                           {% if preferences.dashboard_layout == value %}checked{% endif %}
                                           class="sr-only peer">
                                    <div class="flex flex-col items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:bg-blue-50">
                                        <i class="fas fa-
                                            {% if value == 'grid' %}th
                                            {% elif value == 'list' %}list
                                            {% else %}id-card{% endif %} text-2xl text-gray-400 peer-checked:text-blue-500 mb-2"></i>
                                        <span class="text-sm font-medium text-gray-700">{{ label }}</span>
                                    </div>
                                </label>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Items Per Page -->
                    <div>
                        <label for="items_per_page" class="block text-sm font-medium text-gray-700">Items Per Page</label>
                        <select name="items_per_page" id="items_per_page" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="10" {% if preferences.items_per_page == 10 %}selected{% endif %}>10 items</option>
                            <option value="20" {% if preferences.items_per_page == 20 %}selected{% endif %}>20 items</option>
                            <option value="50" {% if preferences.items_per_page == 50 %}selected{% endif %}>50 items</option>
                            <option value="100" {% if preferences.items_per_page == 100 %}selected{% endif %}>100 items</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Content Preferences -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-medium text-gray-900">Content Preferences</h2>
                    <p class="text-sm text-gray-500">Control what type of content you see.</p>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Content Difficulty -->
                    <div>
                        <label for="content_difficulty" class="block text-sm font-medium text-gray-700">Preferred Content Difficulty</label>
                        <select name="content_difficulty" id="content_difficulty" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="beginner" {% if preferences.content_difficulty == 'beginner' %}selected{% endif %}>Beginner</option>
                            <option value="intermediate" {% if preferences.content_difficulty == 'intermediate' %}selected{% endif %}>Intermediate</option>
                            <option value="advanced" {% if preferences.content_difficulty == 'advanced' %}selected{% endif %}>Advanced</option>
                            <option value="all" {% if preferences.content_difficulty == 'all' %}selected{% endif %}>All Levels</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Notification Preferences -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-medium text-gray-900">Notification Preferences</h2>
                    <p class="text-sm text-gray-500">Choose how often you want to receive emails and what types.</p>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Email Frequency -->
                    <div>
                        <label for="email_frequency" class="block text-sm font-medium text-gray-700">Email Frequency</label>
                        <select name="email_frequency" id="email_frequency" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="daily" {% if preferences.email_frequency == 'daily' %}selected{% endif %}>Daily</option>
                            <option value="weekly" {% if preferences.email_frequency == 'weekly' %}selected{% endif %}>Weekly</option>
                            <option value="monthly" {% if preferences.email_frequency == 'monthly' %}selected{% endif %}>Monthly</option>
                            <option value="never" {% if preferences.email_frequency == 'never' %}selected{% endif %}>Never</option>
                        </select>
                    </div>

                    <!-- Notification Types -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Email Notifications</label>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input type="checkbox" name="notify_new_tools" id="notify_new_tools" 
                                       {% if preferences.notify_new_tools %}checked{% endif %}
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="notify_new_tools" class="ml-3 text-sm text-gray-700">
                                    New tools added to the platform
                                </label>
                            </div>

                            <div class="flex items-center">
                                <input type="checkbox" name="notify_tool_updates" id="notify_tool_updates" 
                                       {% if preferences.notify_tool_updates %}checked{% endif %}
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="notify_tool_updates" class="ml-3 text-sm text-gray-700">
                                    Updates to tools you've bookmarked
                                </label>
                            </div>

                            <div class="flex items-center">
                                <input type="checkbox" name="notify_new_articles" id="notify_new_articles" 
                                       {% if preferences.notify_new_articles %}checked{% endif %}
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="notify_new_articles" class="ml-3 text-sm text-gray-700">
                                    New articles in your areas of interest
                                </label>
                            </div>

                            <div class="flex items-center">
                                <input type="checkbox" name="notify_comments" id="notify_comments" 
                                       {% if preferences.notify_comments %}checked{% endif %}
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="notify_comments" class="ml-3 text-sm text-gray-700">
                                    Replies to your comments
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Privacy Settings -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h2 class="text-lg font-medium text-gray-900">Privacy Settings</h2>
                    <p class="text-sm text-gray-500">Control who can see your profile and activity.</p>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Profile Visibility -->
                    <div>
                        <label for="profile_visibility" class="block text-sm font-medium text-gray-700">Profile Visibility</label>
                        <select name="profile_visibility" id="profile_visibility" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="public" {% if preferences.profile_visibility == 'public' %}selected{% endif %}>Public - Anyone can view</option>
                            <option value="authenticated" {% if preferences.profile_visibility == 'authenticated' %}selected{% endif %}>Authenticated Users Only</option>
                            <option value="private" {% if preferences.profile_visibility == 'private' %}selected{% endif %}>Private - Only you can view</option>
                        </select>
                    </div>

                    <!-- Activity and Bookmark Visibility -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Visibility Options</label>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input type="checkbox" name="show_activity" id="show_activity" 
                                       {% if preferences.show_activity %}checked{% endif %}
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="show_activity" class="ml-3 text-sm text-gray-700">
                                    Show my activity on my profile
                                </label>
                            </div>

                            <div class="flex items-center">
                                <input type="checkbox" name="show_bookmarks" id="show_bookmarks" 
                                       {% if preferences.show_bookmarks %}checked{% endif %}
                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="show_bookmarks" class="ml-3 text-sm text-gray-700">
                                    Show my bookmarks on my profile (only visible to you)
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Save Button -->
            <div class="flex justify-end">
                <button type="submit" class="inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-save mr-2"></i>
                    Save Preferences
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
